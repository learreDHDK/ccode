<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  
  <style>
    .highcharts-figure, .highcharts-data-table table {
  min-width: 310px; 
  max-width: 800px;
  margin: 1em auto;
}

#container {
  height: 400px;
}

.highcharts-data-table table {
	font-family: Verdana, sans-serif;
	border-collapse: collapse;
	border: 1px solid #EBEBEB;
	margin: 10px auto;
	text-align: center;
	width: 100%;
	max-width: 500px;
}
.highcharts-data-table caption {
  padding: 1em 0;
  font-size: 1.2em;
  color: #555;
}
.highcharts-data-table th {
	font-weight: 600;
  padding: 0.5em;
}
.highcharts-data-table td, .highcharts-data-table th, .highcharts-data-table caption {
  padding: 0.5em;
}
.highcharts-data-table thead tr, .highcharts-data-table tr:nth-child(even) {
  background: #f8f8f8;
}
.highcharts-data-table tr:hover {
  background: #f1f7ff;
}
  </style>
</head>

<body id="page-top">
  <script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<script src="https://code.highcharts.com/modules/export-data.js"></script>
<script src="https://code.highcharts.com/modules/accessibility.js"></script>
  

  <div class="dropdown">
    <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">Select the country
    <span class="caret"></span></button>
    <ul class="dropdown-menu" style="overflow: auto; height: 32vh;">
      <li><a href='#' id='Austria' onClick='set_chart(this.id)'>Austria</a></li>
<li><a  class="dropdown-item" href='#' id='Belgium' onClick='set_chart(this.id)'>Belgium</a></li>
<li><a  class="dropdown-item" href='#' id='Bulgaria' onClick='set_chart(this.id)'>Bulgaria</a></li>
<li><a  class="dropdown-item" href='#' id='Croatia' onClick='set_chart(this.id)'>Croatia</a></li>
<li><a  class="dropdown-item" href='#' id='Cyprus' onClick='set_chart(this.id)'>Cyprus</a></li>
<li><a  class="dropdown-item" href='#' id='Czech Republic' onClick='set_chart(this.id)'>Czech Republic</a></li>
<li><a  class="dropdown-item" href='#' id='Denmark' onClick='set_chart(this.id)'>Denmark</a></li>
<li><a  class="dropdown-item" href='#' id='Estonia' onClick='set_chart(this.id)'>Estonia</a></li>
<li><a  class="dropdown-item" href='#' id='Finland' onClick='set_chart(this.id)'>Finland</a></li>
<li><a  class="dropdown-item" href='#' id='France' onClick='set_chart(this.id)'>France</a></li>
<li><a  class="dropdown-item" href='#' id='Germany' onClick='set_chart(this.id)'>Germany</a></li>
<li><a  class="dropdown-item" href='#' id='Hungary' onClick='set_chart(this.id)'>Hungary</a></li>
<li><a  class="dropdown-item" href='#' id='Ireland' onClick='set_chart(this.id)'>Ireland</a></li>
<li><a  class="dropdown-item" href='#' id='Italy' onClick='set_chart(this.id)'>Italy</a></li>
<li><a  class="dropdown-item" href='#' id='Latvia' onClick='set_chart(this.id)'>Latvia</a></li>
<li><a  class="dropdown-item" href='#' id='Lithuania' onClick='set_chart(this.id)'>Lithuania</a></li>
<li><a  class="dropdown-item" href='#' id='Luxembourg' onClick='set_chart(this.id)'>Luxembourg</a></li>
<li><a  class="dropdown-item" href='#' id='Malta' onClick='set_chart(this.id)'>Malta</a></li>
<li><a  class="dropdown-item" href='#' id='Netherlands' onClick='set_chart(this.id)'>Netherlands</a></li>
<li><a  class="dropdown-item" href='#' id='Poland' onClick='set_chart(this.id)'>Poland</a></li>
<li><a  class="dropdown-item" href='#' id='Portugal' onClick='set_chart(this.id)'>Portugal</a></li>
<li><a  class="dropdown-item" href='#' id='Romania' onClick='set_chart(this.id)'>Romania</a></li>
<li><a  class="dropdown-item" href='#' id='Slovakia' onClick='set_chart(this.id)'>Slovakia</a></li>
<li><a  class="dropdown-item" href='#' id='Slovenia' onClick='set_chart(this.id)'>Slovenia</a></li>
<li><a  class="dropdown-item" href='#' id='Spain' onClick='set_chart(this.id)'>Spain</a></li>
<li><a  class="dropdown-item" href='#' id='Sweden' onClick='set_chart(this.id)'>Sweden</a></li>
<li><a  class="dropdown-item" href='#' id='United Kingdom' onClick='set_chart(this.id)'>United Kingdom</a></li>
    </ul>
  </div>
  
<figure class="highcharts-figure">
  <div id="container"></div>
  <p class="highcharts-description">
    This pie chart shows how the chart legend can be used to provide
    information about the individual slices.
  </p>
</figure>


  <script>
  
    var request = new XMLHttpRequest();
    request.open("GET", "https://raw.githubusercontent.com/learreDHDK/ccode/master/charts/json-files/eu-opinions-q4.json", false);
    request.send(null)
    var obj = JSON.parse(request.responseText);
    
    var euro13 = []
var euro19 = []

function set_chart(clicked_id) {
  
	if (euro13.length != 0) {
		euro13 = [];
	} 
	if (euro19.length != 0) {
		euro19 = [];
	}

  var country = obj[clicked_id]

  euro13.push(country["2013"])
  euro13 = euro13[0]
  euro19.push(country["2019"])
  euro19 = euro19[0]
  
Highcharts.chart('container', {
  chart: {
    type: 'bar'
  },
  title: {
    text: clicked_id
  },
  xAxis: {
    categories: ['Eurobarometer 2013', 'Eurobarometer 2019']
  },
  yAxis: {
    min: 0,
    title: {
      text: 'Respondents (%)'
    }
  },
  legend: {
    reversed: true
  },
  plotOptions: {
    series: {
      stacking: 'normal'
    }
  },
  series: [{
    name: 'National Governments ',
    data: [euro13[0], euro19[0]]
  }, {
    name: 'The European Union',
    data: [euro13[1], euro19[1]]
  }, {
    name: 'Regional and local authorities',
    data: [euro13[2], euro19[2]]
  }, {
    name: 'Business and industry',
    data: [euro13[3], euro19[3]]
  }, {
    name: 'You personally',
    data: [euro13[4], euro19[4]]
  }, {
    name: 'Environmental groups ',
    data: [euro13[5], euro19[5]]
  }, {
    name: 'Other',
    data: [euro13[6], euro19[6]]
  }, {
    name: 'All of them',
    data: [euro13[7], euro19[7]]
  }, {
    name: 'None',
    data: [euro13[8], euro19[8]]
  }, {
    name: 'Don\'t know',
    data: [euro13[9], euro19[9]]
  }]
});
}
  </script>

</body>

</html>
